This section explains how to **gracefully or forcefully stop running Docker containers**, and the real difference between the commands `docker stop` and `docker kill`.

Let’s break it down cleanly:

---

### **1. The Setup**

You ran:

```bash
docker create busybox ping google.com
docker start <container_id>
```

This starts a BusyBox container running an endless `ping` command — it will **never stop by itself** unless you intervene.

If you check:

```bash
docker ps
```

you’ll see the container running continuously.

---

### **2. The Problem**

Unlike the earlier `echo` examples, this process doesn’t exit on its own, so:

* You can’t just “wait” for it to stop.
* You can’t press **Ctrl+C** either, because you’re not attached (`-a` not used).

You need a **Docker command** to stop it.

---

### **3. The Two Ways to Stop a Container**

Docker gives you two related commands:

```bash
docker stop <container_id>
docker kill <container_id>
```

They sound similar — but behave **very differently under the hood**.

---

### **4. What `docker stop` Does (Graceful Shutdown)**

When you run:

```bash
docker stop <container_id>
```

Docker sends a **SIGTERM (terminate)** signal to the **main process** inside the container.

* SIGTERM tells the process:
  “Please stop. You have a chance to clean up and exit gracefully.”

* The container’s process can **catch** this signal and do cleanup tasks like:

  * Saving data to disk
  * Closing network connections
  * Releasing resources

Then it exits cleanly, and the container stops.

✅ **Use this first whenever possible.**

---

### **5. The 10-Second Timeout**

If the container’s main process **ignores** the SIGTERM or doesn’t exit within **10 seconds**,
Docker automatically escalates and sends a **SIGKILL** signal.

* SIGKILL = “Stop immediately. No questions asked.”
* The process is forcibly terminated.
* No cleanup code runs.

So effectively:

```bash
docker stop = SIGTERM → wait 10s → SIGKILL (if needed)
```

You can also change the timeout (in seconds):

```bash
docker stop -t 5 <container_id>   # waits only 5 seconds
```

---

### **6. What `docker kill` Does (Immediate Stop)**

When you run:

```bash
docker kill <container_id>
```

Docker **skips the polite phase** and directly sends **SIGKILL** to the container’s main process.

* The container stops **instantly**.
* No cleanup, no delay.
* It’s like pulling the plug on a running server.

Use this only when:

* The container is unresponsive.
* `docker stop` doesn’t work.

---

### **7. Real Example**

#### Create and Start a Long-Running Container

```bash
docker create busybox ping google.com
docker start <id>
```

#### Stop Gracefully

```bash
docker stop <id>
```

* Waits ~10 seconds
* Ping doesn’t handle SIGTERM → Docker escalates to SIGKILL
* Container stops after the timeout.

#### Start Again, Then Kill Instantly

```bash
docker start <id>
docker kill <id>
```

* Immediate stop. No waiting.

---

### **8. Quick Comparison**

| Command       | Signal Sent                 | Waits? | Graceful Shutdown? | Typical Use                   |
| ------------- | --------------------------- | ------ | ------------------ | ----------------------------- |
| `docker stop` | SIGTERM → SIGKILL after 10s | Yes    | Yes                | Normal stop, let app clean up |
| `docker kill` | SIGKILL                     | No     | No                 | Force stop when unresponsive  |

---

### **9. How to Get Container IDs**

Always check running containers first:

```bash
docker ps
```

Then stop or kill using the ID or name:

```bash
docker stop <container_id>
docker kill <container_name>
```

---

### **10. Summary**

* `docker stop` = **graceful shutdown (SIGTERM)** → fallback to **SIGKILL** after 10s
* `docker kill` = **immediate termination (SIGKILL)**
* Always prefer `docker stop` first. Use `docker kill` only when necessary.
* Processes like `ping` ignore SIGTERM, so `stop` → 10s delay → forced kill.

---

Would you like me to show how to **trap and handle SIGTERM** inside a container using a small shell script example next? It’ll help you understand what “graceful shutdown” looks like from *inside* the container’s perspective.
